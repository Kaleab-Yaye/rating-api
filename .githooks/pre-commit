#!/bin/sh

echo "Running Spotless check..."
./mvnw spotless:check
SPOTLESS_EXIT_CODE=$?

if [ $SPOTLESS_EXIT_CODE -ne 0 ]; then
    echo "Spotless check failed! Run './mvnw spotless:apply' to fix formatting issues."
    exit 1
fi

echo "Running tests..."
./mvnw test
TEST_EXIT_CODE=$?

if [ $TEST_EXIT_CODE -ne 0 ]; then
    echo "Tests failed! Please fix the failing tests before committing."
    exit 1
fi

echo "All checks passed!"
exit 0